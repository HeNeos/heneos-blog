<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" as="image" href="https://projecteuler.net/profile/HeNeos.png"/><link rel="stylesheet" href="/heneos-blog/_next/static/css/10c5481d6c776747.css" data-precedence="next"/><link rel="stylesheet" href="/heneos-blog/_next/static/css/31789995b2727dcb.css" data-precedence="next"/><link rel="stylesheet" href="/heneos-blog/_next/static/css/5eacd01f773eed7f.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/heneos-blog/_next/static/chunks/webpack-f5e2af5b5e96ca99.js"/><script src="/heneos-blog/_next/static/chunks/4bd1b696-2bfa57da125389e3.js" async=""></script><script src="/heneos-blog/_next/static/chunks/587-b330864006e0cdca.js" async=""></script><script src="/heneos-blog/_next/static/chunks/main-app-c254e3910443191a.js" async=""></script><script src="/heneos-blog/_next/static/chunks/app/blog/%5Bslug%5D/page-4374ee6693381f28.js" async=""></script><title>TSP Art + FFT | HeNeos blog</title><meta name="description" content="Research and implementation of TSP art along with Fourier epicycles"/><script src="/heneos-blog/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="bg-zinc-950 text-zinc-100 min-h-screen"><header class="p-6 border-b border-zinc-800"><div class="max-w-6xl mx-auto"><div class="mb-10"><h1 class="text-6xl font-raleway tracking-tighter mb-2 text-center">HeNeos blog</h1><p class="text-xl font-mono text-center text-zinc-500 mb-1">Josue H. @ JP Morgan Chase</p><p class="text-xl font-raleway text-center text-zinc-600">HeNeos</p></div><div class="flex justify-center space-x-20 mb-4"><a target="_blank" class="text-base font-raleway text-zinc-500 hover:text-accent animated-underline" href="https://github.com/HeNeos">GitHub</a><a target="_blank" class="text-base font-raleway text-zinc-500 hover:text-accent animated-underline" href="https://www.linkedin.com/in/heneos">LinkedIn</a><a class="text-base font-raleway text-zinc-500 hover:text-accent animated-underline" href="mailto:he.neos@outlook.com">Email</a></div><div class="text-xl font-raleway flex flex-col sm:flex-row justify-center gap-4 border-t border-zinc-800 pt-4"><a href="/heneos-blog"><div class="cursor-pointer hover:bg-gray-200 hover:text-zinc-900 transition-colors px-4 py-2 rounded-md flex items-center justify-between"><span>Home</span><span class="text-zinc-500 ml-6">ha</span></div></a><a href="/heneos-blog/blog"><div class="cursor-pointer hover:bg-gray-200 hover:text-zinc-900 transition-colors px-4 py-2 rounded-md flex items-center justify-between"><span>Blog</span><span class="text-zinc-500 ml-6">hb</span></div></a><a href="/heneos-blog/about"><div class="cursor-pointer hover:bg-gray-200 hover:text-zinc-900 transition-colors px-4 py-2 rounded-md flex items-center justify-between"><span>About</span><span class="text-zinc-500 ml-6">hc</span></div></a></div></div></header><main class="container mx-auto px-4 py-8 max-w-5xl"><div class="max-w-5xl mx-auto"><a class="text-zinc-500 hover:text-blue-400 mb-6 inline-block animated-underline" href="/heneos-blog/blog">‚Üê Back to all posts</a><article class="border border-zinc-800 rounded-lg p-4 bg-zinc-900/30"><header class="mb-8 border-b border-zinc-800 pb-6"><h1 class="text-3xl font-bold mb-4 gradient-text">TSP Art + FFT</h1><p class="text-zinc-500 mb-4 font-mono">October 19, 2025</p><div class="flex gap-2 flex-wrap"><span class="inline-block bg-zinc-800 text-zinc-300 px-2 py-1 text-xs rounded-sm">#<!-- -->image-processing</span></div></header><div class="gap-4 mt-8"><div class="prose prose-invert prose-zinc max-w-none"><p class="text-base text-zinc-300 my-4 leading-relaxed">To be honest, I&#x27;ve finished this implementation since many months ago (in March I think), but I&#x27;ve being busy with other things that I still didn&#x27;t have time to write about.</p>
<p class="text-base text-zinc-300 my-4 leading-relaxed">Originally, this idea came to my mind because of a friend of mine and I already had a code for image stippling, however it has a couple of issues:</p>
<ol class="text-sm list-decimal pl-6 my-4 text-zinc-300 space-y-2">
<li class="text-zinc-300">Not my own implementation (I coded it, but it was based on codetrain work)</li>
<li class="text-zinc-300">It is in JS</li>
</ol>
<p class="text-base text-zinc-300 my-4 leading-relaxed">but keeping those issues aside, I wondered: If I consider each of these stippling points as a node, what will be the best way to draw edges between them so that it resembles to the original image?</p>
<p class="text-base text-zinc-300 my-4 leading-relaxed">My image stippling code already assigns a weight to each node depending of <em>how important</em> it&#x27;s in the whole image (thanks to voronoid stippling), so I could assume that those nodes should also have <em>important</em> edges (?).</p>
<p class="text-base text-zinc-300 my-4 leading-relaxed">This way I could assign a different <code class="bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs">width</code> to each edge, I don&#x27;t call it <code class="bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs">weight</code> because it&#x27;s the weight of the node and that <code class="bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs">weight</code> is merely used for visualization purposes, so in this context edge <code class="bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs">width</code> and node <code class="bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs">weight</code> means the same.</p>
<p class="text-base text-zinc-300 my-4 leading-relaxed"><strong>so</strong>, since edges doesn&#x27;t have a weight... I want to connect <strong>all</strong> the nodes in a graph keeping the whole covered distance as short as possible and that it&#x27;s also a cycle (this condition will be explained later).</p>
<p class="text-base text-zinc-300 my-4 leading-relaxed">If I rephrase it a bit:</p>
<blockquote class="border-l-4 border-blue-400 pl-4 italic text-zinc-400 my-4">
<p class="text-base text-zinc-300 my-4 leading-relaxed">Given a list of nodes and the distances between each pair of nodes, what is the shortest possible route that visits each node exactly once and returns to the origin node?</p>
</blockquote>
<p class="text-base text-zinc-300 my-4 leading-relaxed">that is the Travelling Salesman Problem, which is NP-hard :(... but before of giving up, let me explain how this could be approched if we relax the conditions a bit.</p>
<p class="text-base text-zinc-300 my-4 leading-relaxed">oh and btw, this will be in Rust, but I&#x27;m not so good at it yet, so... enjoy.</p>
<h2 class="text-xl font-bold mt-8 mb-4 text-zinc-100 border-b border-zinc-800 pb-2">TSP Art</h2>
<p class="text-base text-zinc-300 my-4 leading-relaxed">Although TSP is a NP-hard problem, I don&#x27;t really care so much about this condition: <code class="bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs">shortest possible route</code>. I prefer a shorter route, but that is not mandatory in this context, what really matters most is:</p>
<ol class="text-sm list-decimal pl-6 my-4 text-zinc-300 space-y-2">
<li class="text-zinc-300">Visit each node exactly once</li>
<li class="text-zinc-300">Returns to the origin node</li>
<li class="text-zinc-300">No cross edges</li>
</ol>
<p class="text-base text-zinc-300 my-4 leading-relaxed">last condition is important and not originally part of the TSP, but we require a planar graph so anyway the condition of <code class="bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs">shortest possible route</code> will probably imply another kind of algorithms with this new condition.</p>
<p class="text-base text-zinc-300 my-4 leading-relaxed">I&#x27;ll use two different strategies for the tour generation, one is the <code class="bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs">cheapest insertion algorithm</code> that I&#x27;ll use only when the amount of nodes is less than 2048, otherwise I&#x27;ll use a <code class="bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs">greedy</code> strategy, both of them uses the <code class="bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs">2-opt algorithm</code> to remove cross edges.</p>
<p class="text-base text-zinc-300 my-4 leading-relaxed">My <code class="bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs">greedy</code> algorithm is pretty similar to the <code class="bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs">cheapest insertion algorithm</code>, but instead of trying with every node and calculate the cost of that insertion, I&#x27;ll skip some nodes and taking in consideration
only the nodes that minimizes the euclidean distance as an heuristic.</p>
<pre class="rounded-sm p-4 overflow-auto bg-zinc-900 text-zinc-100 my-4 border border-zinc-800"><code class="hljs language-rust text-xs"><span class="hljs-keyword">impl</span> <span class="hljs-title class_">TourStrategy</span> <span class="hljs-keyword">for</span> <span class="hljs-title class_">GreedyStrategy</span> {
    <span class="hljs-keyword">fn</span> <span class="hljs-title function_">build_tour</span>(&amp;<span class="hljs-keyword">self</span>, points: &amp;<span class="hljs-type">Vec</span>&lt;(<span class="hljs-type">f32</span>, <span class="hljs-type">f32</span>)&gt;, hull_points: &amp;<span class="hljs-type">Vec</span>&lt;Point&lt;<span class="hljs-type">f32</span>&gt;&gt;) <span class="hljs-punctuation">-&gt;</span> <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">usize</span>&gt; {
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">hull_indices</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">usize</span>&gt; = hull_points
            .<span class="hljs-title function_ invoke__">into_iter</span>()
            .<span class="hljs-title function_ invoke__">map</span>(|p| {
                points
                    .<span class="hljs-title function_ invoke__">iter</span>()
                    .<span class="hljs-title function_ invoke__">position</span>(|&amp;pt| pt.<span class="hljs-number">0</span> == p.<span class="hljs-title function_ invoke__">x</span>() &amp;&amp; pt.<span class="hljs-number">1</span> == p.<span class="hljs-title function_ invoke__">y</span>())
                    .<span class="hljs-title function_ invoke__">unwrap</span>()
            })
            .<span class="hljs-title function_ invoke__">collect</span>();

        <span class="hljs-keyword">if</span> hull_indices.<span class="hljs-title function_ invoke__">len</span>() &gt; <span class="hljs-number">1</span> &amp;&amp; hull_indices.<span class="hljs-title function_ invoke__">first</span>() == hull_indices.<span class="hljs-title function_ invoke__">last</span>() {
            hull_indices.<span class="hljs-title function_ invoke__">pop</span>();
        }
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">tour</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">usize</span>&gt; = hull_indices.<span class="hljs-title function_ invoke__">clone</span>();
        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">in_tour</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">bool</span>&gt; = <span class="hljs-built_in">vec!</span>[<span class="hljs-literal">false</span>; points.<span class="hljs-title function_ invoke__">len</span>()];
        <span class="hljs-keyword">for</span> &amp;idx <span class="hljs-keyword">in</span> &amp;tour {
            in_tour[idx] = <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">kdtree</span> = KdTree::&lt;<span class="hljs-type">f32</span>, <span class="hljs-number">2</span>&gt;::<span class="hljs-title function_ invoke__">with_capacity</span>(points.<span class="hljs-title function_ invoke__">len</span>());
        <span class="hljs-keyword">for</span> (idx, &amp;(x, y)) <span class="hljs-keyword">in</span> points.<span class="hljs-title function_ invoke__">iter</span>().<span class="hljs-title function_ invoke__">enumerate</span>() {
            <span class="hljs-keyword">if</span> !in_tour[idx] {
                kdtree.<span class="hljs-title function_ invoke__">add</span>(&amp;[x, y], idx <span class="hljs-keyword">as</span> <span class="hljs-type">u64</span>);
            }
        }

        <span class="hljs-keyword">while</span> tour.<span class="hljs-title function_ invoke__">len</span>() &lt; points.<span class="hljs-title function_ invoke__">len</span>() {
            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">best_increase</span>: <span class="hljs-type">f32</span> = <span class="hljs-type">f32</span>::INFINITY;
            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">best_p</span> = <span class="hljs-literal">None</span>;
            <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">best_k</span> = <span class="hljs-literal">None</span>;

            <span class="hljs-keyword">let</span> <span class="hljs-variable">step</span>: <span class="hljs-type">usize</span> = (tour.<span class="hljs-title function_ invoke__">len</span>() &gt;&gt; <span class="hljs-number">8</span>).<span class="hljs-title function_ invoke__">max</span>(<span class="hljs-number">1</span>).<span class="hljs-title function_ invoke__">min</span>(<span class="hljs-number">4</span>);
            <span class="hljs-keyword">let</span> <span class="hljs-variable">max_neighbors</span>: <span class="hljs-type">usize</span> = <span class="hljs-keyword">if</span> step &gt; <span class="hljs-number">4</span> { <span class="hljs-number">8</span> } <span class="hljs-keyword">else</span> { <span class="hljs-number">3</span> };
            <span class="hljs-keyword">for</span> <span class="hljs-variable">k</span> <span class="hljs-keyword">in</span> (<span class="hljs-number">0</span>..tour.<span class="hljs-title function_ invoke__">len</span>()).<span class="hljs-title function_ invoke__">step_by</span>(step) {
                <span class="hljs-keyword">let</span> <span class="hljs-variable">next_k</span>: <span class="hljs-type">usize</span> = (k + <span class="hljs-number">1</span>) % tour.<span class="hljs-title function_ invoke__">len</span>();
                <span class="hljs-keyword">let</span> <span class="hljs-variable">i</span>: <span class="hljs-type">usize</span> = tour[k];
                <span class="hljs-keyword">let</span> <span class="hljs-variable">j</span>: <span class="hljs-type">usize</span> = tour[next_k];
                <span class="hljs-keyword">let</span> <span class="hljs-variable">p1</span>: (<span class="hljs-type">f32</span>, <span class="hljs-type">f32</span>) = points[i];
                <span class="hljs-keyword">let</span> <span class="hljs-variable">p2</span>: (<span class="hljs-type">f32</span>, <span class="hljs-type">f32</span>) = points[j];

                <span class="hljs-keyword">let</span> <span class="hljs-variable">mid_x</span>: <span class="hljs-type">f32</span> = (p1.<span class="hljs-number">0</span> + p2.<span class="hljs-number">0</span>) / <span class="hljs-number">2.0</span>;
                <span class="hljs-keyword">let</span> <span class="hljs-variable">mid_y</span>: <span class="hljs-type">f32</span> = (p1.<span class="hljs-number">1</span> + p2.<span class="hljs-number">1</span>) / <span class="hljs-number">2.0</span>;

                <span class="hljs-keyword">let</span> <span class="hljs-variable">neighbors</span> =
                    kdtree.nearest_n::&lt;SquaredEuclidean&gt;(&amp;[mid_x, mid_y], max_neighbors);
                <span class="hljs-keyword">for</span> <span class="hljs-variable">neighbor</span> <span class="hljs-keyword">in</span> neighbors {
                    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span>: <span class="hljs-type">usize</span> = neighbor.item <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>;
                    <span class="hljs-keyword">if</span> in_tour[p] {
                        <span class="hljs-keyword">continue</span>;
                    }

                    <span class="hljs-keyword">let</span> <span class="hljs-variable">increase</span>: <span class="hljs-type">f32</span> = <span class="hljs-title function_ invoke__">distance</span>(points[i], points[p])
                        + <span class="hljs-title function_ invoke__">distance</span>(points[p], points[j])
                        - <span class="hljs-title function_ invoke__">distance</span>(points[i], points[j]);

                    <span class="hljs-keyword">if</span> increase &lt; best_increase {
                        best_increase = increase;
                        best_p = <span class="hljs-title function_ invoke__">Some</span>(p);
                        best_k = <span class="hljs-title function_ invoke__">Some</span>(k);
                    }
                }
            }

            <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> (<span class="hljs-title function_ invoke__">Some</span>(p), <span class="hljs-title function_ invoke__">Some</span>(k)) = (best_p, best_k) {
                <span class="hljs-keyword">let</span> <span class="hljs-variable">next_k</span>: <span class="hljs-type">usize</span> = (k + <span class="hljs-number">1</span>) % tour.<span class="hljs-title function_ invoke__">len</span>();

                <span class="hljs-keyword">if</span> next_k == <span class="hljs-number">0</span> {
                    tour.<span class="hljs-title function_ invoke__">push</span>(p);
                } <span class="hljs-keyword">else</span> {
                    tour.<span class="hljs-title function_ invoke__">insert</span>(next_k, p);
                }

                in_tour[p] = <span class="hljs-literal">true</span>;

                <span class="hljs-keyword">let</span> <span class="hljs-variable">neighbors</span> =
                    kdtree.nearest_n::&lt;SquaredEuclidean&gt;(&amp;[points[p].<span class="hljs-number">0</span>, points[p].<span class="hljs-number">1</span>], <span class="hljs-number">1</span>);
                <span class="hljs-keyword">for</span> <span class="hljs-variable">neighbor</span> <span class="hljs-keyword">in</span> neighbors.<span class="hljs-title function_ invoke__">iter</span>() {
                    <span class="hljs-keyword">let</span> <span class="hljs-variable">idx</span> = neighbor.item <span class="hljs-keyword">as</span> <span class="hljs-type">usize</span>;
                    <span class="hljs-keyword">if</span> idx == p {
                        kdtree.<span class="hljs-title function_ invoke__">remove</span>(&amp;[points[p].<span class="hljs-number">0</span>, points[p].<span class="hljs-number">1</span>], p <span class="hljs-keyword">as</span> <span class="hljs-type">u64</span>);
                        <span class="hljs-keyword">break</span>;
                    }
                }
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">let</span> <span class="hljs-variable">remaining</span>: <span class="hljs-type">Vec</span>&lt;<span class="hljs-type">usize</span>&gt; =
                    (<span class="hljs-number">0</span>..points.<span class="hljs-title function_ invoke__">len</span>()).<span class="hljs-title function_ invoke__">filter</span>(|&amp;idx| !in_tour[idx]).<span class="hljs-title function_ invoke__">collect</span>();

                <span class="hljs-keyword">if</span> !remaining.<span class="hljs-title function_ invoke__">is_empty</span>() {
                    <span class="hljs-keyword">let</span> <span class="hljs-variable">p</span>: <span class="hljs-type">usize</span> = remaining[<span class="hljs-number">0</span>];
                    tour.<span class="hljs-title function_ invoke__">push</span>(p);
                    in_tour[p] = <span class="hljs-literal">true</span>;

                    kdtree.<span class="hljs-title function_ invoke__">remove</span>(&amp;[points[p].<span class="hljs-number">0</span>, points[p].<span class="hljs-number">1</span>], p <span class="hljs-keyword">as</span> <span class="hljs-type">u64</span>);
                } <span class="hljs-keyword">else</span> {
                    <span class="hljs-keyword">break</span>;
                }
            }
            <span class="hljs-keyword">if</span> tour.<span class="hljs-title function_ invoke__">len</span>() % <span class="hljs-number">32</span> == <span class="hljs-number">0</span> {
                <span class="hljs-title function_ invoke__">two_opt</span>(&amp;points, &amp;<span class="hljs-keyword">mut</span> tour);
            }
        }

        <span class="hljs-title function_ invoke__">two_opt</span>(&amp;points, &amp;<span class="hljs-keyword">mut</span> tour);
        tour
    }
}
</code></pre>
<h2 class="text-xl font-bold mt-8 mb-4 text-zinc-100 border-b border-zinc-800 pb-2">Fourier transform</h2>
<p class="text-base text-zinc-300 my-4 leading-relaxed">This is actually not part of TSP art, and I didn&#x27;t saw to anyone else doing something similar but, now that the code is able to find a closed path wihtout cross edges, it&#x27;s also possible to describe this discrete path with Fourier epicycles. It means, you can now describe a path that draws your image <del>or at least, kinda</del>, using just Fourier.</p>
<pre class="rounded-sm p-4 overflow-auto bg-zinc-900 text-zinc-100 my-4 border border-zinc-800"><code class="hljs language-rust text-xs"><span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">compute_fourier_series</span>(
    points: &amp;[(<span class="hljs-type">f32</span>, <span class="hljs-type">f32</span>)],
    num_epicycles: <span class="hljs-type">usize</span>,
) <span class="hljs-punctuation">-&gt;</span> (Complex&lt;<span class="hljs-type">f32</span>&gt;, <span class="hljs-type">Vec</span>&lt;Epicycle&gt;) {
    <span class="hljs-keyword">let</span> <span class="hljs-variable">n_points</span>: <span class="hljs-type">usize</span> = points.<span class="hljs-title function_ invoke__">len</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">buffer</span>: <span class="hljs-type">Vec</span>&lt;Complex&lt;<span class="hljs-type">f32</span>&gt;&gt; = points
        .<span class="hljs-title function_ invoke__">iter</span>()
        .<span class="hljs-title function_ invoke__">map</span>(|&amp;(x, y)| Complex { re: x, im: y })
        .<span class="hljs-title function_ invoke__">collect</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">planner</span> = FftPlanner::<span class="hljs-title function_ invoke__">new</span>();
    <span class="hljs-keyword">let</span> <span class="hljs-variable">fft</span> = planner.<span class="hljs-title function_ invoke__">plan_fft_forward</span>(n_points);
    fft.<span class="hljs-title function_ invoke__">process</span>(&amp;<span class="hljs-keyword">mut</span> buffer);

    <span class="hljs-keyword">let</span> <span class="hljs-variable">c_0</span> = buffer[<span class="hljs-number">0</span>] / n_points <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>;

    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">coeffs</span>: <span class="hljs-type">Vec</span>&lt;(<span class="hljs-type">i32</span>, <span class="hljs-type">f32</span>, <span class="hljs-type">f32</span>)&gt; = (<span class="hljs-number">1</span>..n_points)
        .<span class="hljs-title function_ invoke__">map</span>(|k| {
            <span class="hljs-keyword">let</span> <span class="hljs-variable">freq</span> = <span class="hljs-keyword">if</span> k &lt;= n_points / <span class="hljs-number">2</span> {
                k <span class="hljs-keyword">as</span> <span class="hljs-type">i32</span>
            } <span class="hljs-keyword">else</span> {
                k <span class="hljs-keyword">as</span> <span class="hljs-type">i32</span> - n_points <span class="hljs-keyword">as</span> <span class="hljs-type">i32</span>
            };
            <span class="hljs-keyword">let</span> <span class="hljs-variable">coeff</span> = buffer[k] / n_points <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span>;
            <span class="hljs-keyword">let</span> <span class="hljs-variable">radius</span> = coeff.<span class="hljs-title function_ invoke__">norm</span>();
            <span class="hljs-keyword">let</span> <span class="hljs-variable">phase</span> = coeff.<span class="hljs-title function_ invoke__">arg</span>();
            (freq, radius, phase)
        })
        .<span class="hljs-title function_ invoke__">collect</span>();

    coeffs.<span class="hljs-title function_ invoke__">sort_by</span>(|a, b| b.<span class="hljs-number">1</span>.<span class="hljs-title function_ invoke__">partial_cmp</span>(&amp;a.<span class="hljs-number">1</span>).<span class="hljs-title function_ invoke__">unwrap</span>());
    <span class="hljs-keyword">let</span> <span class="hljs-variable">num_epicycles</span> = num_epicycles.<span class="hljs-title function_ invoke__">min</span>(coeffs.<span class="hljs-title function_ invoke__">len</span>());
    <span class="hljs-keyword">let</span> <span class="hljs-variable">selected_coeffs</span> = &amp;coeffs[<span class="hljs-number">0</span>..num_epicycles];

    <span class="hljs-keyword">let</span> <span class="hljs-variable">epicycles</span>: <span class="hljs-type">Vec</span>&lt;Epicycle&gt; = selected_coeffs
        .<span class="hljs-title function_ invoke__">iter</span>()
        .<span class="hljs-title function_ invoke__">map</span>(|&amp;(freq, radius, phase)| Epicycle {
            radius,
            freq,
            phase,
        })
        .<span class="hljs-title function_ invoke__">collect</span>();

    (c_0, epicycles)
}

<span class="hljs-keyword">pub</span> <span class="hljs-keyword">fn</span> <span class="hljs-title function_">compute_position</span>(c_0: Complex&lt;<span class="hljs-type">f32</span>&gt;, epicycles: &amp;[Epicycle], t: <span class="hljs-type">f32</span>) <span class="hljs-punctuation">-&gt;</span> (<span class="hljs-type">f32</span>, <span class="hljs-type">f32</span>) {
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">x</span> = c_0.re;
    <span class="hljs-keyword">let</span> <span class="hljs-keyword">mut </span><span class="hljs-variable">y</span> = c_0.im;
    <span class="hljs-keyword">for</span> <span class="hljs-variable">epicycle</span> <span class="hljs-keyword">in</span> epicycles {
        <span class="hljs-keyword">let</span> <span class="hljs-variable">angle</span> = <span class="hljs-number">2.0</span> * PI * epicycle.freq <span class="hljs-keyword">as</span> <span class="hljs-type">f32</span> * t + epicycle.phase;
        x += epicycle.radius * angle.<span class="hljs-title function_ invoke__">cos</span>();
        y += epicycle.radius * angle.<span class="hljs-title function_ invoke__">sin</span>();
    }
    (x, y)
}
</code></pre></div></div></article></div></main><footer class="border-t border-zinc-800 py-6 mt-12"><div class="container mx-auto px-4 relative h-full"><div class="grid grid-cols-1 md:grid-cols-2 gap-8"><div><h3 class="text-lg font-semibold text-white mb-4">Connect</h3><div class="flex space-x-4"><a href="https://github.com/HeNeos" target="_blank" rel="noopener noreferrer" class="text-slate-400 hover:text-white transition-colors">GitHub</a><a href="https://x.com/_HeNeos" target="_blank" rel="noopener noreferrer" class="text-slate-400 hover:text-white transition-colors">X</a><a href="https://codeforces.com/profile/HeNeos" target="_blank" rel="noopener noreferrer" class="text-slate-400 hover:text-white transition-colors">Codeforces</a><a href="https://codeforces.com/profile/Ptolemy_314" target="_blank" rel="noopener noreferrer" class="text-slate-400 hover:text-white transition-colors">Codeforces old</a></div></div><div><h4 class="text-lg font-semibold text-white mb-4">Project Euler</h4><a href="https://projecteuler.net/profile/HeNeos.png" target="_blank" rel="noopener noreferrer"><img src="https://projecteuler.net/profile/HeNeos.png" alt="Project Euler Profile" class=" h-auto max-h-10 rounded-sm object-contain"/></a></div></div></div></footer><script src="/heneos-blog/_next/static/chunks/webpack-f5e2af5b5e96ca99.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[8173,[\"953\",\"static/chunks/app/blog/%5Bslug%5D/page-4374ee6693381f28.js\"],\"\"]\n3:I[5244,[],\"\"]\n4:I[3866,[],\"\"]\n5:I[6213,[],\"OutletBoundary\"]\n8:I[6213,[],\"ViewportBoundary\"]\na:I[6213,[],\"MetadataBoundary\"]\nc:I[4835,[],\"\"]\n:HL[\"/heneos-blog/_next/static/css/10c5481d6c776747.css\",\"style\"]\n:HL[\"/heneos-blog/_next/static/css/31789995b2727dcb.css\",\"style\"]\n:HL[\"/heneos-blog/_next/static/css/5eacd01f773eed7f.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"fJJ3ICafy6pREaFwsjUj9\",\"p\":\"/heneos-blog\",\"c\":[\"\",\"blog\",\"2025-10-19-tsp-art\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"blog\",{\"children\":[[\"slug\",\"2025-10-19-tsp-art\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/heneos-blog/_next/static/css/10c5481d6c776747.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/heneos-blog/_next/static/css/31789995b2727dcb.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"bg-zinc-950 text-zinc-100 min-h-screen\",\"children\":[[\"$\",\"header\",null,{\"className\":\"p-6 border-b border-zinc-800\",\"children\":[\"$\",\"div\",null,{\"className\":\"max-w-6xl mx-auto\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-10\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-6xl font-raleway tracking-tighter mb-2 text-center\",\"children\":\"HeNeos blog\"}],[\"$\",\"p\",null,{\"className\":\"text-xl font-mono text-center text-zinc-500 mb-1\",\"children\":\"Josue H. @ JP Morgan Chase\"}],[\"$\",\"p\",null,{\"className\":\"text-xl font-raleway text-center text-zinc-600\",\"children\":\"HeNeos\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex justify-center space-x-20 mb-4\",\"children\":[[\"$\",\"$L2\",null,{\"href\":\"https://github.com/HeNeos\",\"target\":\"_blank\",\"className\":\"text-base font-raleway text-zinc-500 hover:text-accent animated-underline\",\"children\":\"GitHub\"}],[\"$\",\"$L2\",null,{\"href\":\"https://www.linkedin.com/in/heneos\",\"target\":\"_blank\",\"className\":\"text-base font-raleway text-zinc-500 hover:text-accent animated-underline\",\"children\":\"LinkedIn\"}],[\"$\",\"$L2\",null,{\"href\":\"mailto:he.neos@outlook.com\",\"className\":\"text-base font-raleway text-zinc-500 hover:text-accent animated-underline\",\"children\":\"Email\"}]]}],[\"$\",\"div\",null,{\"className\":\"text-xl font-raleway flex flex-col sm:flex-row justify-center gap-4 border-t border-zinc-800 pt-4\",\"children\":[[\"$\",\"$L2\",null,{\"href\":\"/\",\"children\":[\"$\",\"div\",null,{\"className\":\"cursor-pointer hover:bg-gray-200 hover:text-zinc-900 transition-colors px-4 py-2 rounded-md flex items-center justify-between\",\"children\":[[\"$\",\"span\",null,{\"children\":\"Home\"}],[\"$\",\"span\",null,{\"className\":\"text-zinc-500 ml-6\",\"children\":\"ha\"}]]}]}],[\"$\",\"$L2\",null,{\"href\":\"/blog\",\"children\":[\"$\",\"div\",null,{\"className\":\"cursor-pointer hover:bg-gray-200 hover:text-zinc-900 transition-colors px-4 py-2 rounded-md flex items-center justify-between\",\"children\":[[\"$\",\"span\",null,{\"children\":\"Blog\"}],[\"$\",\"span\",null,{\"className\":\"text-zinc-500 ml-6\",\"children\":\"hb\"}]]}]}],[\"$\",\"$L2\",null,{\"href\":\"/about\",\"children\":[\"$\",\"div\",null,{\"className\":\"cursor-pointer hover:bg-gray-200 hover:text-zinc-900 transition-colors px-4 py-2 rounded-md flex items-center justify-between\",\"children\":[[\"$\",\"span\",null,{\"children\":\"About\"}],[\"$\",\"span\",null,{\"className\":\"text-zinc-500 ml-6\",\"children\":\"hc\"}]]}]}]]}]]}]}],[\"$\",\"main\",null,{\"className\":\"container mx-auto px-4 py-8 max-w-5xl\",\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"$undefined\",[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"footer\",null,{\"className\":\"border-t border-zinc-800 py-6 mt-12\",\"children\":[\"$\",\"div\",null,{\"className\":\"container mx-auto px-4 relative h-full\",\"children\":[\"$\",\"div\",null,{\"className\":\"grid grid-cols-1 md:grid-cols-2 gap-8\",\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"h3\",null,{\"className\":\"text-lg font-semibold text-white mb-4\",\"children\":\"Connect\"}],[\"$\",\"div\",null,{\"className\":\"flex space-x-4\",\"children\":[[\"$\",\"a\",null,{\"href\":\"https://github.com/HeNeos\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"text-slate-400 hover:text-white transition-colors\",\"children\":\"GitHub\"}],[\"$\",\"a\",null,{\"href\":\"https://x.com/_HeNeos\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"text-slate-400 hover:text-white transition-colors\",\"children\":\"X\"}],[\"$\",\"a\",null,{\"href\":\"https://codeforces.com/profile/HeNeos\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"text-slate-400 hover:text-white transition-colors\",\"children\":\"Codeforces\"}],[\"$\",\"a\",null,{\"href\":\"https://codeforces.com/profile/Ptolemy_314\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"className\":\"text-slate-400 hover:text-white transition-colors\",\"children\":\"Codeforces old\"}]]}]]}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"h4\",null,{\"className\":\"text-lg font-semibold text-white mb-4\",\"children\":\"Project Euler\"}],[\"$\",\"a\",null,{\"href\":\"https://projecteuler.net/profile/HeNeos.png\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"children\":[\"$\",\"img\",null,{\"src\":\"https://projecteuler.net/profile/HeNeos.png\",\"alt\":\"Project Euler Profile\",\"className\":\" h-auto max-h-10 rounded-sm object-contain\"}]}]]}]]}]}]}]]}]}]]}],{\"children\":[\"blog\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"2025-10-19-tsp-art\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"div\",null,{\"className\":\"max-w-5xl mx-auto\",\"children\":[[\"$\",\"$L2\",null,{\"href\":\"/blog\",\"className\":\"text-zinc-500 hover:text-blue-400 mb-6 inline-block animated-underline\",\"children\":\"‚Üê Back to all posts\"}],[\"$\",\"article\",null,{\"className\":\"border border-zinc-800 rounded-lg p-4 bg-zinc-900/30\",\"children\":[[\"$\",\"header\",null,{\"className\":\"mb-8 border-b border-zinc-800 pb-6\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"text-3xl font-bold mb-4 gradient-text\",\"children\":\"TSP Art + FFT\"}],[\"$\",\"p\",null,{\"className\":\"text-zinc-500 mb-4 font-mono\",\"children\":\"October 19, 2025\"}],[\"$\",\"div\",null,{\"className\":\"flex gap-2 flex-wrap\",\"children\":[[\"$\",\"span\",\"image-processing\",{\"className\":\"inline-block bg-zinc-800 text-zinc-300 px-2 py-1 text-xs rounded-sm\",\"children\":[\"#\",\"image-processing\"]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"gap-4 mt-8\",\"children\":[\"$\",\"div\",null,{\"className\":\"prose prose-invert prose-zinc max-w-none\",\"children\":[[\"$\",\"p\",\"p-0\",{\"className\":\"text-base text-zinc-300 my-4 leading-relaxed\",\"children\":\"To be honest, I've finished this implementation since many months ago (in March I think), but I've being busy with other things that I still didn't have time to write about.\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"className\":\"text-base text-zinc-300 my-4 leading-relaxed\",\"children\":\"Originally, this idea came to my mind because of a friend of mine and I already had a code for image stippling, however it has a couple of issues:\"}],\"\\n\",[\"$\",\"ol\",\"ol-0\",{\"className\":\"text-sm list-decimal pl-6 my-4 text-zinc-300 space-y-2\",\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"className\":\"text-zinc-300\",\"children\":\"Not my own implementation (I coded it, but it was based on codetrain work)\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"className\":\"text-zinc-300\",\"children\":\"It is in JS\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"className\":\"text-base text-zinc-300 my-4 leading-relaxed\",\"children\":\"but keeping those issues aside, I wondered: If I consider each of these stippling points as a node, what will be the best way to draw edges between them so that it resembles to the original image?\"}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"className\":\"text-base text-zinc-300 my-4 leading-relaxed\",\"children\":[\"My image stippling code already assigns a weight to each node depending of \",[\"$\",\"em\",\"em-0\",{\"children\":\"how important\"}],\" it's in the whole image (thanks to voronoid stippling), so I could assume that those nodes should also have \",[\"$\",\"em\",\"em-1\",{\"children\":\"important\"}],\" edges (?).\"]}],\"\\n\",[\"$\",\"p\",\"p-4\",{\"className\":\"text-base text-zinc-300 my-4 leading-relaxed\",\"children\":[\"This way I could assign a different \",[\"$\",\"code\",\"code-0\",{\"className\":\"bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs\",\"children\":\"width\"}],\" to each edge, I don't call it \",[\"$\",\"code\",\"code-1\",{\"className\":\"bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs\",\"children\":\"weight\"}],\" because it's the weight of the node and that \",[\"$\",\"code\",\"code-2\",{\"className\":\"bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs\",\"children\":\"weight\"}],\" is merely used for visualization purposes, so in this context edge \",[\"$\",\"code\",\"code-3\",{\"className\":\"bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs\",\"children\":\"width\"}],\" and node \",[\"$\",\"code\",\"code-4\",{\"className\":\"bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs\",\"children\":\"weight\"}],\" means the same.\"]}],\"\\n\",[\"$\",\"p\",\"p-5\",{\"className\":\"text-base text-zinc-300 my-4 leading-relaxed\",\"children\":[[\"$\",\"strong\",\"strong-0\",{\"children\":\"so\"}],\", since edges doesn't have a weight... I want to connect \",[\"$\",\"strong\",\"strong-1\",{\"children\":\"all\"}],\" the nodes in a graph keeping the whole covered distance as short as possible and that it's also a cycle (this condition will be explained later).\"]}],\"\\n\",[\"$\",\"p\",\"p-6\",{\"className\":\"text-base text-zinc-300 my-4 leading-relaxed\",\"children\":\"If I rephrase it a bit:\"}],\"\\n\",[\"$\",\"blockquote\",\"blockquote-0\",{\"className\":\"border-l-4 border-blue-400 pl-4 italic text-zinc-400 my-4\",\"children\":[\"\\n\",[\"$\",\"p\",\"p-0\",{\"className\":\"text-base text-zinc-300 my-4 leading-relaxed\",\"children\":\"Given a list of nodes and the distances between each pair of nodes, what is the shortest possible route that visits each node exactly once and returns to the origin node?\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-7\",{\"className\":\"text-base text-zinc-300 my-4 leading-relaxed\",\"children\":\"that is the Travelling Salesman Problem, which is NP-hard :(... but before of giving up, let me explain how this could be approched if we relax the conditions a bit.\"}],\"\\n\",[\"$\",\"p\",\"p-8\",{\"className\":\"text-base text-zinc-300 my-4 leading-relaxed\",\"children\":\"oh and btw, this will be in Rust, but I'm not so good at it yet, so... enjoy.\"}],\"\\n\",[\"$\",\"h2\",\"h2-0\",{\"className\":\"text-xl font-bold mt-8 mb-4 text-zinc-100 border-b border-zinc-800 pb-2\",\"children\":\"TSP Art\"}],\"\\n\",[\"$\",\"p\",\"p-9\",{\"className\":\"text-base text-zinc-300 my-4 leading-relaxed\",\"children\":[\"Although TSP is a NP-hard problem, I don't really care so much about this condition: \",[\"$\",\"code\",\"code-0\",{\"className\":\"bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs\",\"children\":\"shortest possible route\"}],\". I prefer a shorter route, but that is not mandatory in this context, what really matters most is:\"]}],\"\\n\",[\"$\",\"ol\",\"ol-1\",{\"className\":\"text-sm list-decimal pl-6 my-4 text-zinc-300 space-y-2\",\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"className\":\"text-zinc-300\",\"children\":\"Visit each node exactly once\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"className\":\"text-zinc-300\",\"children\":\"Returns to the origin node\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"className\":\"text-zinc-300\",\"children\":\"No cross edges\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-10\",{\"className\":\"text-base text-zinc-300 my-4 leading-relaxed\",\"children\":[\"last condition is important and not originally part of the TSP, but we require a planar graph so anyway the condition of \",[\"$\",\"code\",\"code-0\",{\"className\":\"bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs\",\"children\":\"shortest possible route\"}],\" will probably imply another kind of algorithms with this new condition.\"]}],\"\\n\",[\"$\",\"p\",\"p-11\",{\"className\":\"text-base text-zinc-300 my-4 leading-relaxed\",\"children\":[\"I'll use two different strategies for the tour generation, one is the \",[\"$\",\"code\",\"code-0\",{\"className\":\"bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs\",\"children\":\"cheapest insertion algorithm\"}],\" that I'll use only when the amount of nodes is less than 2048, otherwise I'll use a \",[\"$\",\"code\",\"code-1\",{\"className\":\"bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs\",\"children\":\"greedy\"}],\" strategy, both of them uses the \",[\"$\",\"code\",\"code-2\",{\"className\":\"bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs\",\"children\":\"2-opt algorithm\"}],\" to remove cross edges.\"]}],\"\\n\",[\"$\",\"p\",\"p-12\",{\"className\":\"text-base text-zinc-300 my-4 leading-relaxed\",\"children\":[\"My \",[\"$\",\"code\",\"code-0\",{\"className\":\"bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs\",\"children\":\"greedy\"}],\" algorithm is pretty similar to the \",[\"$\",\"code\",\"code-1\",{\"className\":\"bg-zinc-900 text-blue-600 px-1 py-0.5 rounded-sm text-xs\",\"children\":\"cheapest insertion algorithm\"}],\", but instead of trying with every node and calculate the cost of that insertion, I'll skip some nodes and taking in consideration\\nonly the nodes that minimizes the euclidean distance as an heuristic.\"]}],\"\\n\",[\"$\",\"pre\",\"pre-0\",{\"className\":\"rounded-sm p-4 overflow-auto bg-zinc-900 text-zinc-100 my-4 border border-zinc-800\",\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-rust text-xs\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-keyword\",\"children\":\"impl\"}],\" \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-title class_\",\"children\":\"TourStrategy\"}],\" \",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-keyword\",\"children\":\"for\"}],\" \",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-title class_\",\"children\":\"GreedyStrategy\"}],\" {\\n    \",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-keyword\",\"children\":\"fn\"}],\" \",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-title function_\",\"children\":\"build_tour\"}],\"(\u0026\",[\"$\",\"span\",\"span-6\",{\"className\":\"hljs-keyword\",\"children\":\"self\"}],\", points: \u0026\",[\"$\",\"span\",\"span-7\",{\"className\":\"hljs-type\",\"children\":\"Vec\"}],\"\u003c(\",[\"$\",\"span\",\"span-8\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\", \",[\"$\",\"span\",\"span-9\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\")\u003e, hull_points: \u0026\",[\"$\",\"span\",\"span-10\",{\"className\":\"hljs-type\",\"children\":\"Vec\"}],\"\u003cPoint\u003c\",[\"$\",\"span\",\"span-11\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\"\u003e\u003e) \",[\"$\",\"span\",\"span-12\",{\"className\":\"hljs-punctuation\",\"children\":\"-\u003e\"}],\" \",[\"$\",\"span\",\"span-13\",{\"className\":\"hljs-type\",\"children\":\"Vec\"}],\"\u003c\",[\"$\",\"span\",\"span-14\",{\"className\":\"hljs-type\",\"children\":\"usize\"}],\"\u003e {\\n        \",[\"$\",\"span\",\"span-15\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-16\",{\"className\":\"hljs-keyword\",\"children\":\"mut \"}],[\"$\",\"span\",\"span-17\",{\"className\":\"hljs-variable\",\"children\":\"hull_indices\"}],\": \",[\"$\",\"span\",\"span-18\",{\"className\":\"hljs-type\",\"children\":\"Vec\"}],\"\u003c\",[\"$\",\"span\",\"span-19\",{\"className\":\"hljs-type\",\"children\":\"usize\"}],\"\u003e = hull_points\\n            .\",[\"$\",\"span\",\"span-20\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"into_iter\"}],\"()\\n            .\",[\"$\",\"span\",\"span-21\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"map\"}],\"(|p| {\\n                points\\n                    .\",[\"$\",\"span\",\"span-22\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"iter\"}],\"()\\n                    .\",[\"$\",\"span\",\"span-23\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"position\"}],\"(|\u0026pt| pt.\",[\"$\",\"span\",\"span-24\",{\"className\":\"hljs-number\",\"children\":\"0\"}],\" == p.\",[\"$\",\"span\",\"span-25\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"x\"}],\"() \u0026\u0026 pt.\",[\"$\",\"span\",\"span-26\",{\"className\":\"hljs-number\",\"children\":\"1\"}],\" == p.\",[\"$\",\"span\",\"span-27\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"y\"}],\"())\\n                    .\",[\"$\",\"span\",\"span-28\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"unwrap\"}],\"()\\n            })\\n            .\",[\"$\",\"span\",\"span-29\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"collect\"}],\"();\\n\\n        \",[\"$\",\"span\",\"span-30\",{\"className\":\"hljs-keyword\",\"children\":\"if\"}],\" hull_indices.\",[\"$\",\"span\",\"span-31\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"len\"}],\"() \u003e \",[\"$\",\"span\",\"span-32\",{\"className\":\"hljs-number\",\"children\":\"1\"}],\" \u0026\u0026 hull_indices.\",[\"$\",\"span\",\"span-33\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"first\"}],\"() == hull_indices.\",[\"$\",\"span\",\"span-34\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"last\"}],\"() {\\n            hull_indices.\",[\"$\",\"span\",\"span-35\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"pop\"}],\"();\\n        }\\n        \",[\"$\",\"span\",\"span-36\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-37\",{\"className\":\"hljs-keyword\",\"children\":\"mut \"}],[\"$\",\"span\",\"span-38\",{\"className\":\"hljs-variable\",\"children\":\"tour\"}],\": \",[\"$\",\"span\",\"span-39\",{\"className\":\"hljs-type\",\"children\":\"Vec\"}],\"\u003c\",[\"$\",\"span\",\"span-40\",{\"className\":\"hljs-type\",\"children\":\"usize\"}],\"\u003e = hull_indices.\",[\"$\",\"span\",\"span-41\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"clone\"}],\"();\\n        \",[\"$\",\"span\",\"span-42\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-43\",{\"className\":\"hljs-keyword\",\"children\":\"mut \"}],[\"$\",\"span\",\"span-44\",{\"className\":\"hljs-variable\",\"children\":\"in_tour\"}],\": \",[\"$\",\"span\",\"span-45\",{\"className\":\"hljs-type\",\"children\":\"Vec\"}],\"\u003c\",[\"$\",\"span\",\"span-46\",{\"className\":\"hljs-type\",\"children\":\"bool\"}],\"\u003e = \",[\"$\",\"span\",\"span-47\",{\"className\":\"hljs-built_in\",\"children\":\"vec!\"}],\"[\",[\"$\",\"span\",\"span-48\",{\"className\":\"hljs-literal\",\"children\":\"false\"}],\"; points.\",[\"$\",\"span\",\"span-49\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"len\"}],\"()];\\n        \",[\"$\",\"span\",\"span-50\",{\"className\":\"hljs-keyword\",\"children\":\"for\"}],\" \u0026idx \",[\"$\",\"span\",\"span-51\",{\"className\":\"hljs-keyword\",\"children\":\"in\"}],\" \u0026tour {\\n            in_tour[idx] = \",[\"$\",\"span\",\"span-52\",{\"className\":\"hljs-literal\",\"children\":\"true\"}],\";\\n        }\\n\\n        \",[\"$\",\"span\",\"span-53\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-54\",{\"className\":\"hljs-keyword\",\"children\":\"mut \"}],[\"$\",\"span\",\"span-55\",{\"className\":\"hljs-variable\",\"children\":\"kdtree\"}],\" = KdTree::\u003c\",[\"$\",\"span\",\"span-56\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\", \",[\"$\",\"span\",\"span-57\",{\"className\":\"hljs-number\",\"children\":\"2\"}],\"\u003e::\",[\"$\",\"span\",\"span-58\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"with_capacity\"}],\"(points.\",[\"$\",\"span\",\"span-59\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"len\"}],\"());\\n        \",[\"$\",\"span\",\"span-60\",{\"className\":\"hljs-keyword\",\"children\":\"for\"}],\" (idx, \u0026(x, y)) \",[\"$\",\"span\",\"span-61\",{\"className\":\"hljs-keyword\",\"children\":\"in\"}],\" points.\",[\"$\",\"span\",\"span-62\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"iter\"}],\"().\",[\"$\",\"span\",\"span-63\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"enumerate\"}],\"() {\\n            \",[\"$\",\"span\",\"span-64\",{\"className\":\"hljs-keyword\",\"children\":\"if\"}],\" !in_tour[idx] {\\n                kdtree.\",[\"$\",\"span\",\"span-65\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"add\"}],\"(\u0026[x, y], idx \",[\"$\",\"span\",\"span-66\",{\"className\":\"hljs-keyword\",\"children\":\"as\"}],\" \",[\"$\",\"span\",\"span-67\",{\"className\":\"hljs-type\",\"children\":\"u64\"}],\");\\n            }\\n        }\\n\\n        \",[\"$\",\"span\",\"span-68\",{\"className\":\"hljs-keyword\",\"children\":\"while\"}],\" tour.\",[\"$\",\"span\",\"span-69\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"len\"}],\"() \u003c points.\",[\"$\",\"span\",\"span-70\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"len\"}],\"() {\\n            \",[\"$\",\"span\",\"span-71\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-72\",{\"className\":\"hljs-keyword\",\"children\":\"mut \"}],[\"$\",\"span\",\"span-73\",{\"className\":\"hljs-variable\",\"children\":\"best_increase\"}],\": \",[\"$\",\"span\",\"span-74\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\" = \",[\"$\",\"span\",\"span-75\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\"::INFINITY;\\n            \",[\"$\",\"span\",\"span-76\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-77\",{\"className\":\"hljs-keyword\",\"children\":\"mut \"}],[\"$\",\"span\",\"span-78\",{\"className\":\"hljs-variable\",\"children\":\"best_p\"}],\" = \",[\"$\",\"span\",\"span-79\",{\"className\":\"hljs-literal\",\"children\":\"None\"}],\";\\n            \",[\"$\",\"span\",\"span-80\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-81\",{\"className\":\"hljs-keyword\",\"children\":\"mut \"}],[\"$\",\"span\",\"span-82\",{\"className\":\"hljs-variable\",\"children\":\"best_k\"}],\" = \",[\"$\",\"span\",\"span-83\",{\"className\":\"hljs-literal\",\"children\":\"None\"}],\";\\n\\n            \",[\"$\",\"span\",\"span-84\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-85\",{\"className\":\"hljs-variable\",\"children\":\"step\"}],\": \",[\"$\",\"span\",\"span-86\",{\"className\":\"hljs-type\",\"children\":\"usize\"}],\" = (tour.\",[\"$\",\"span\",\"span-87\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"len\"}],\"() \u003e\u003e \",[\"$\",\"span\",\"span-88\",{\"className\":\"hljs-number\",\"children\":\"8\"}],\").\",[\"$\",\"span\",\"span-89\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"max\"}],\"(\",[\"$\",\"span\",\"span-90\",{\"className\":\"hljs-number\",\"children\":\"1\"}],\").\",[\"$\",\"span\",\"span-91\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"min\"}],\"(\",[\"$\",\"span\",\"span-92\",{\"className\":\"hljs-number\",\"children\":\"4\"}],\");\\n            \",[\"$\",\"span\",\"span-93\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-94\",{\"className\":\"hljs-variable\",\"children\":\"max_neighbors\"}],\": \",[\"$\",\"span\",\"span-95\",{\"className\":\"hljs-type\",\"children\":\"usize\"}],\" = \",[\"$\",\"span\",\"span-96\",{\"className\":\"hljs-keyword\",\"children\":\"if\"}],\" step \u003e \",[\"$\",\"span\",\"span-97\",{\"className\":\"hljs-number\",\"children\":\"4\"}],\" { \",[\"$\",\"span\",\"span-98\",{\"className\":\"hljs-number\",\"children\":\"8\"}],\" } \",[\"$\",\"span\",\"span-99\",{\"className\":\"hljs-keyword\",\"children\":\"else\"}],\" { \",[\"$\",\"span\",\"span-100\",{\"className\":\"hljs-number\",\"children\":\"3\"}],\" };\\n            \",[\"$\",\"span\",\"span-101\",{\"className\":\"hljs-keyword\",\"children\":\"for\"}],\" \",[\"$\",\"span\",\"span-102\",{\"className\":\"hljs-variable\",\"children\":\"k\"}],\" \",[\"$\",\"span\",\"span-103\",{\"className\":\"hljs-keyword\",\"children\":\"in\"}],\" (\",[\"$\",\"span\",\"span-104\",{\"className\":\"hljs-number\",\"children\":\"0\"}],\"..tour.\",[\"$\",\"span\",\"span-105\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"len\"}],\"()).\",[\"$\",\"span\",\"span-106\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"step_by\"}],\"(step) {\\n                \",[\"$\",\"span\",\"span-107\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-108\",{\"className\":\"hljs-variable\",\"children\":\"next_k\"}],\": \",[\"$\",\"span\",\"span-109\",{\"className\":\"hljs-type\",\"children\":\"usize\"}],\" = (k + \",[\"$\",\"span\",\"span-110\",{\"className\":\"hljs-number\",\"children\":\"1\"}],\") % tour.\",[\"$\",\"span\",\"span-111\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"len\"}],\"();\\n                \",[\"$\",\"span\",\"span-112\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-113\",{\"className\":\"hljs-variable\",\"children\":\"i\"}],\": \",[\"$\",\"span\",\"span-114\",{\"className\":\"hljs-type\",\"children\":\"usize\"}],\" = tour[k];\\n                \",[\"$\",\"span\",\"span-115\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-116\",{\"className\":\"hljs-variable\",\"children\":\"j\"}],\": \",[\"$\",\"span\",\"span-117\",{\"className\":\"hljs-type\",\"children\":\"usize\"}],\" = tour[next_k];\\n                \",[\"$\",\"span\",\"span-118\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-119\",{\"className\":\"hljs-variable\",\"children\":\"p1\"}],\": (\",[\"$\",\"span\",\"span-120\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\", \",[\"$\",\"span\",\"span-121\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\") = points[i];\\n                \",[\"$\",\"span\",\"span-122\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-123\",{\"className\":\"hljs-variable\",\"children\":\"p2\"}],\": (\",[\"$\",\"span\",\"span-124\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\", \",[\"$\",\"span\",\"span-125\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\") = points[j];\\n\\n                \",[\"$\",\"span\",\"span-126\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-127\",{\"className\":\"hljs-variable\",\"children\":\"mid_x\"}],\": \",[\"$\",\"span\",\"span-128\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\" = (p1.\",[\"$\",\"span\",\"span-129\",{\"className\":\"hljs-number\",\"children\":\"0\"}],\" + p2.\",[\"$\",\"span\",\"span-130\",{\"className\":\"hljs-number\",\"children\":\"0\"}],\") / \",[\"$\",\"span\",\"span-131\",{\"className\":\"hljs-number\",\"children\":\"2.0\"}],\";\\n                \",[\"$\",\"span\",\"span-132\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-133\",{\"className\":\"hljs-variable\",\"children\":\"mid_y\"}],\": \",[\"$\",\"span\",\"span-134\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\" = (p1.\",[\"$\",\"span\",\"span-135\",{\"className\":\"hljs-number\",\"children\":\"1\"}],\" + p2.\",[\"$\",\"span\",\"span-136\",{\"className\":\"hljs-number\",\"children\":\"1\"}],\") / \",[\"$\",\"span\",\"span-137\",{\"className\":\"hljs-number\",\"children\":\"2.0\"}],\";\\n\\n                \",[\"$\",\"span\",\"span-138\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-139\",{\"className\":\"hljs-variable\",\"children\":\"neighbors\"}],\" =\\n                    kdtree.nearest_n::\u003cSquaredEuclidean\u003e(\u0026[mid_x, mid_y], max_neighbors);\\n                \",[\"$\",\"span\",\"span-140\",{\"className\":\"hljs-keyword\",\"children\":\"for\"}],\" \",[\"$\",\"span\",\"span-141\",{\"className\":\"hljs-variable\",\"children\":\"neighbor\"}],\" \",[\"$\",\"span\",\"span-142\",{\"className\":\"hljs-keyword\",\"children\":\"in\"}],\" neighbors {\\n                    \",[\"$\",\"span\",\"span-143\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-144\",{\"className\":\"hljs-variable\",\"children\":\"p\"}],\": \",[\"$\",\"span\",\"span-145\",{\"className\":\"hljs-type\",\"children\":\"usize\"}],\" = neighbor.item \",[\"$\",\"span\",\"span-146\",{\"className\":\"hljs-keyword\",\"children\":\"as\"}],\" \",[\"$\",\"span\",\"span-147\",{\"className\":\"hljs-type\",\"children\":\"usize\"}],\";\\n                    \",[\"$\",\"span\",\"span-148\",{\"className\":\"hljs-keyword\",\"children\":\"if\"}],\" in_tour[p] {\\n                        \",[\"$\",\"span\",\"span-149\",{\"className\":\"hljs-keyword\",\"children\":\"continue\"}],\";\\n                    }\\n\\n                    \",[\"$\",\"span\",\"span-150\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-151\",{\"className\":\"hljs-variable\",\"children\":\"increase\"}],\": \",[\"$\",\"span\",\"span-152\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\" = \",[\"$\",\"span\",\"span-153\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"distance\"}],\"(points[i], points[p])\\n                        + \",[\"$\",\"span\",\"span-154\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"distance\"}],\"(points[p], points[j])\\n                        - \",[\"$\",\"span\",\"span-155\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"distance\"}],\"(points[i], points[j]);\\n\\n                    \",[\"$\",\"span\",\"span-156\",{\"className\":\"hljs-keyword\",\"children\":\"if\"}],\" increase \u003c best_increase {\\n                        best_increase = increase;\\n                        best_p = \",[\"$\",\"span\",\"span-157\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"Some\"}],\"(p);\\n                        best_k = \",[\"$\",\"span\",\"span-158\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"Some\"}],\"(k);\\n                    }\\n                }\\n            }\\n\\n            \",[\"$\",\"span\",\"span-159\",{\"className\":\"hljs-keyword\",\"children\":\"if\"}],\" \",[\"$\",\"span\",\"span-160\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" (\",[\"$\",\"span\",\"span-161\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"Some\"}],\"(p), \",[\"$\",\"span\",\"span-162\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"Some\"}],\"(k)) = (best_p, best_k) {\\n                \",[\"$\",\"span\",\"span-163\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-164\",{\"className\":\"hljs-variable\",\"children\":\"next_k\"}],\": \",[\"$\",\"span\",\"span-165\",{\"className\":\"hljs-type\",\"children\":\"usize\"}],\" = (k + \",[\"$\",\"span\",\"span-166\",{\"className\":\"hljs-number\",\"children\":\"1\"}],\") % tour.\",[\"$\",\"span\",\"span-167\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"len\"}],\"();\\n\\n                \",[\"$\",\"span\",\"span-168\",{\"className\":\"hljs-keyword\",\"children\":\"if\"}],\" next_k == \",[\"$\",\"span\",\"span-169\",{\"className\":\"hljs-number\",\"children\":\"0\"}],\" {\\n                    tour.\",[\"$\",\"span\",\"span-170\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"push\"}],\"(p);\\n                } \",[\"$\",\"span\",\"span-171\",{\"className\":\"hljs-keyword\",\"children\":\"else\"}],\" {\\n                    tour.\",[\"$\",\"span\",\"span-172\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"insert\"}],\"(next_k, p);\\n                }\\n\\n                in_tour[p] = \",[\"$\",\"span\",\"span-173\",{\"className\":\"hljs-literal\",\"children\":\"true\"}],\";\\n\\n                \",[\"$\",\"span\",\"span-174\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-175\",{\"className\":\"hljs-variable\",\"children\":\"neighbors\"}],\" =\\n                    kdtree.nearest_n::\u003cSquaredEuclidean\u003e(\u0026[points[p].\",[\"$\",\"span\",\"span-176\",{\"className\":\"hljs-number\",\"children\":\"0\"}],\", points[p].\",[\"$\",\"span\",\"span-177\",{\"className\":\"hljs-number\",\"children\":\"1\"}],\"], \",[\"$\",\"span\",\"span-178\",{\"className\":\"hljs-number\",\"children\":\"1\"}],\");\\n                \",[\"$\",\"span\",\"span-179\",{\"className\":\"hljs-keyword\",\"children\":\"for\"}],\" \",[\"$\",\"span\",\"span-180\",{\"className\":\"hljs-variable\",\"children\":\"neighbor\"}],\" \",[\"$\",\"span\",\"span-181\",{\"className\":\"hljs-keyword\",\"children\":\"in\"}],\" neighbors.\",[\"$\",\"span\",\"span-182\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"iter\"}],\"() {\\n                    \",[\"$\",\"span\",\"span-183\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-184\",{\"className\":\"hljs-variable\",\"children\":\"idx\"}],\" = neighbor.item \",[\"$\",\"span\",\"span-185\",{\"className\":\"hljs-keyword\",\"children\":\"as\"}],\" \",[\"$\",\"span\",\"span-186\",{\"className\":\"hljs-type\",\"children\":\"usize\"}],\";\\n                    \",[\"$\",\"span\",\"span-187\",{\"className\":\"hljs-keyword\",\"children\":\"if\"}],\" idx == p {\\n                        kdtree.\",[\"$\",\"span\",\"span-188\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"remove\"}],\"(\u0026[points[p].\",[\"$\",\"span\",\"span-189\",{\"className\":\"hljs-number\",\"children\":\"0\"}],\", points[p].\",[\"$\",\"span\",\"span-190\",{\"className\":\"hljs-number\",\"children\":\"1\"}],\"], p \",[\"$\",\"span\",\"span-191\",{\"className\":\"hljs-keyword\",\"children\":\"as\"}],\" \",[\"$\",\"span\",\"span-192\",{\"className\":\"hljs-type\",\"children\":\"u64\"}],\");\\n                        \",[\"$\",\"span\",\"span-193\",{\"className\":\"hljs-keyword\",\"children\":\"break\"}],\";\\n                    }\\n                }\\n            } \",[\"$\",\"span\",\"span-194\",{\"className\":\"hljs-keyword\",\"children\":\"else\"}],\" {\\n                \",[\"$\",\"span\",\"span-195\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-196\",{\"className\":\"hljs-variable\",\"children\":\"remaining\"}],\": \",[\"$\",\"span\",\"span-197\",{\"className\":\"hljs-type\",\"children\":\"Vec\"}],\"\u003c\",[\"$\",\"span\",\"span-198\",{\"className\":\"hljs-type\",\"children\":\"usize\"}],\"\u003e =\\n                    (\",[\"$\",\"span\",\"span-199\",{\"className\":\"hljs-number\",\"children\":\"0\"}],\"..points.\",[\"$\",\"span\",\"span-200\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"len\"}],\"()).\",[\"$\",\"span\",\"span-201\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"filter\"}],\"(|\u0026idx| !in_tour[idx]).\",[\"$\",\"span\",\"span-202\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"collect\"}],\"();\\n\\n                \",[\"$\",\"span\",\"span-203\",{\"className\":\"hljs-keyword\",\"children\":\"if\"}],\" !remaining.\",[\"$\",\"span\",\"span-204\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"is_empty\"}],\"() {\\n                    \",[\"$\",\"span\",\"span-205\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-206\",{\"className\":\"hljs-variable\",\"children\":\"p\"}],\": \",[\"$\",\"span\",\"span-207\",{\"className\":\"hljs-type\",\"children\":\"usize\"}],\" = remaining[\",[\"$\",\"span\",\"span-208\",{\"className\":\"hljs-number\",\"children\":\"0\"}],\"];\\n                    tour.\",[\"$\",\"span\",\"span-209\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"push\"}],\"(p);\\n                    in_tour[p] = \",[\"$\",\"span\",\"span-210\",{\"className\":\"hljs-literal\",\"children\":\"true\"}],\";\\n\\n                    kdtree.\",[\"$\",\"span\",\"span-211\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"remove\"}],\"(\u0026[points[p].\",[\"$\",\"span\",\"span-212\",{\"className\":\"hljs-number\",\"children\":\"0\"}],\", points[p].\",[\"$\",\"span\",\"span-213\",{\"className\":\"hljs-number\",\"children\":\"1\"}],\"], p \",[\"$\",\"span\",\"span-214\",{\"className\":\"hljs-keyword\",\"children\":\"as\"}],\" \",[\"$\",\"span\",\"span-215\",{\"className\":\"hljs-type\",\"children\":\"u64\"}],\");\\n                } \",[\"$\",\"span\",\"span-216\",{\"className\":\"hljs-keyword\",\"children\":\"else\"}],\" {\\n                    \",[\"$\",\"span\",\"span-217\",{\"className\":\"hljs-keyword\",\"children\":\"break\"}],\";\\n                }\\n            }\\n            \",[\"$\",\"span\",\"span-218\",{\"className\":\"hljs-keyword\",\"children\":\"if\"}],\" tour.\",[\"$\",\"span\",\"span-219\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"len\"}],\"() % \",[\"$\",\"span\",\"span-220\",{\"className\":\"hljs-number\",\"children\":\"32\"}],\" == \",[\"$\",\"span\",\"span-221\",{\"className\":\"hljs-number\",\"children\":\"0\"}],\" {\\n                \",[\"$\",\"span\",\"span-222\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"two_opt\"}],\"(\u0026points, \u0026\",[\"$\",\"span\",\"span-223\",{\"className\":\"hljs-keyword\",\"children\":\"mut\"}],\" tour);\\n            }\\n        }\\n\\n        \",[\"$\",\"span\",\"span-224\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"two_opt\"}],\"(\u0026points, \u0026\",[\"$\",\"span\",\"span-225\",{\"className\":\"hljs-keyword\",\"children\":\"mut\"}],\" tour);\\n        tour\\n    }\\n}\\n\"]}]}],\"\\n\",[\"$\",\"h2\",\"h2-1\",{\"className\":\"text-xl font-bold mt-8 mb-4 text-zinc-100 border-b border-zinc-800 pb-2\",\"children\":\"Fourier transform\"}],\"\\n\",[\"$\",\"p\",\"p-13\",{\"className\":\"text-base text-zinc-300 my-4 leading-relaxed\",\"children\":[\"This is actually not part of TSP art, and I didn't saw to anyone else doing something similar but, now that the code is able to find a closed path wihtout cross edges, it's also possible to describe this discrete path with Fourier epicycles. It means, you can now describe a path that draws your image \",[\"$\",\"del\",\"del-0\",{\"children\":\"or at least, kinda\"}],\", using just Fourier.\"]}],\"\\n\",[\"$\",\"pre\",\"pre-1\",{\"className\":\"rounded-sm p-4 overflow-auto bg-zinc-900 text-zinc-100 my-4 border border-zinc-800\",\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"hljs language-rust text-xs\",\"children\":[[\"$\",\"span\",\"span-0\",{\"className\":\"hljs-keyword\",\"children\":\"pub\"}],\" \",[\"$\",\"span\",\"span-1\",{\"className\":\"hljs-keyword\",\"children\":\"fn\"}],\" \",[\"$\",\"span\",\"span-2\",{\"className\":\"hljs-title function_\",\"children\":\"compute_fourier_series\"}],\"(\\n    points: \u0026[(\",[\"$\",\"span\",\"span-3\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\", \",[\"$\",\"span\",\"span-4\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\")],\\n    num_epicycles: \",[\"$\",\"span\",\"span-5\",{\"className\":\"hljs-type\",\"children\":\"usize\"}],\",\\n) \",[\"$\",\"span\",\"span-6\",{\"className\":\"hljs-punctuation\",\"children\":\"-\u003e\"}],\" (Complex\u003c\",[\"$\",\"span\",\"span-7\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\"\u003e, \",[\"$\",\"span\",\"span-8\",{\"className\":\"hljs-type\",\"children\":\"Vec\"}],\"\u003cEpicycle\u003e) {\\n    \",[\"$\",\"span\",\"span-9\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-10\",{\"className\":\"hljs-variable\",\"children\":\"n_points\"}],\": \",[\"$\",\"span\",\"span-11\",{\"className\":\"hljs-type\",\"children\":\"usize\"}],\" = points.\",[\"$\",\"span\",\"span-12\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"len\"}],\"();\\n    \",[\"$\",\"span\",\"span-13\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-14\",{\"className\":\"hljs-keyword\",\"children\":\"mut \"}],[\"$\",\"span\",\"span-15\",{\"className\":\"hljs-variable\",\"children\":\"buffer\"}],\": \",[\"$\",\"span\",\"span-16\",{\"className\":\"hljs-type\",\"children\":\"Vec\"}],\"\u003cComplex\u003c\",[\"$\",\"span\",\"span-17\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\"\u003e\u003e = points\\n        .\",[\"$\",\"span\",\"span-18\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"iter\"}],\"()\\n        .\",[\"$\",\"span\",\"span-19\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"map\"}],\"(|\u0026(x, y)| Complex { re: x, im: y })\\n        .\",[\"$\",\"span\",\"span-20\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"collect\"}],\"();\\n    \",[\"$\",\"span\",\"span-21\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-22\",{\"className\":\"hljs-keyword\",\"children\":\"mut \"}],[\"$\",\"span\",\"span-23\",{\"className\":\"hljs-variable\",\"children\":\"planner\"}],\" = FftPlanner::\",[\"$\",\"span\",\"span-24\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"new\"}],\"();\\n    \",[\"$\",\"span\",\"span-25\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-26\",{\"className\":\"hljs-variable\",\"children\":\"fft\"}],\" = planner.\",[\"$\",\"span\",\"span-27\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"plan_fft_forward\"}],\"(n_points);\\n    fft.\",[\"$\",\"span\",\"span-28\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"process\"}],\"(\u0026\",[\"$\",\"span\",\"span-29\",{\"className\":\"hljs-keyword\",\"children\":\"mut\"}],\" buffer);\\n\\n    \",[\"$\",\"span\",\"span-30\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-31\",{\"className\":\"hljs-variable\",\"children\":\"c_0\"}],\" = buffer[\",[\"$\",\"span\",\"span-32\",{\"className\":\"hljs-number\",\"children\":\"0\"}],\"] / n_points \",[\"$\",\"span\",\"span-33\",{\"className\":\"hljs-keyword\",\"children\":\"as\"}],\" \",[\"$\",\"span\",\"span-34\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\";\\n\\n    \",[\"$\",\"span\",\"span-35\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-36\",{\"className\":\"hljs-keyword\",\"children\":\"mut \"}],[\"$\",\"span\",\"span-37\",{\"className\":\"hljs-variable\",\"children\":\"coeffs\"}],\": \",[\"$\",\"span\",\"span-38\",{\"className\":\"hljs-type\",\"children\":\"Vec\"}],\"\u003c(\",[\"$\",\"span\",\"span-39\",{\"className\":\"hljs-type\",\"children\":\"i32\"}],\", \",[\"$\",\"span\",\"span-40\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\", \",[\"$\",\"span\",\"span-41\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\")\u003e = (\",[\"$\",\"span\",\"span-42\",{\"className\":\"hljs-number\",\"children\":\"1\"}],\"..n_points)\\n        .\",[\"$\",\"span\",\"span-43\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"map\"}],\"(|k| {\\n            \",[\"$\",\"span\",\"span-44\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-45\",{\"className\":\"hljs-variable\",\"children\":\"freq\"}],\" = \",[\"$\",\"span\",\"span-46\",{\"className\":\"hljs-keyword\",\"children\":\"if\"}],\" k \u003c= n_points / \",[\"$\",\"span\",\"span-47\",{\"className\":\"hljs-number\",\"children\":\"2\"}],\" {\\n                k \",[\"$\",\"span\",\"span-48\",{\"className\":\"hljs-keyword\",\"children\":\"as\"}],\" \",[\"$\",\"span\",\"span-49\",{\"className\":\"hljs-type\",\"children\":\"i32\"}],\"\\n            } \",[\"$\",\"span\",\"span-50\",{\"className\":\"hljs-keyword\",\"children\":\"else\"}],\" {\\n                k \",[\"$\",\"span\",\"span-51\",{\"className\":\"hljs-keyword\",\"children\":\"as\"}],\" \",[\"$\",\"span\",\"span-52\",{\"className\":\"hljs-type\",\"children\":\"i32\"}],\" - n_points \",[\"$\",\"span\",\"span-53\",{\"className\":\"hljs-keyword\",\"children\":\"as\"}],\" \",[\"$\",\"span\",\"span-54\",{\"className\":\"hljs-type\",\"children\":\"i32\"}],\"\\n            };\\n            \",[\"$\",\"span\",\"span-55\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-56\",{\"className\":\"hljs-variable\",\"children\":\"coeff\"}],\" = buffer[k] / n_points \",[\"$\",\"span\",\"span-57\",{\"className\":\"hljs-keyword\",\"children\":\"as\"}],\" \",[\"$\",\"span\",\"span-58\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\";\\n            \",[\"$\",\"span\",\"span-59\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-60\",{\"className\":\"hljs-variable\",\"children\":\"radius\"}],\" = coeff.\",[\"$\",\"span\",\"span-61\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"norm\"}],\"();\\n            \",[\"$\",\"span\",\"span-62\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-63\",{\"className\":\"hljs-variable\",\"children\":\"phase\"}],\" = coeff.\",[\"$\",\"span\",\"span-64\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"arg\"}],\"();\\n            (freq, radius, phase)\\n        })\\n        .\",[\"$\",\"span\",\"span-65\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"collect\"}],\"();\\n\\n    coeffs.\",[\"$\",\"span\",\"span-66\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"sort_by\"}],\"(|a, b| b.\",[\"$\",\"span\",\"span-67\",{\"className\":\"hljs-number\",\"children\":\"1\"}],\".\",[\"$\",\"span\",\"span-68\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"partial_cmp\"}],\"(\u0026a.\",[\"$\",\"span\",\"span-69\",{\"className\":\"hljs-number\",\"children\":\"1\"}],\").\",[\"$\",\"span\",\"span-70\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"unwrap\"}],\"());\\n    \",[\"$\",\"span\",\"span-71\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-72\",{\"className\":\"hljs-variable\",\"children\":\"num_epicycles\"}],\" = num_epicycles.\",[\"$\",\"span\",\"span-73\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"min\"}],\"(coeffs.\",[\"$\",\"span\",\"span-74\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"len\"}],\"());\\n    \",[\"$\",\"span\",\"span-75\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-76\",{\"className\":\"hljs-variable\",\"children\":\"selected_coeffs\"}],\" = \u0026coeffs[\",[\"$\",\"span\",\"span-77\",{\"className\":\"hljs-number\",\"children\":\"0\"}],\"..num_epicycles];\\n\\n    \",[\"$\",\"span\",\"span-78\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-79\",{\"className\":\"hljs-variable\",\"children\":\"epicycles\"}],\": \",[\"$\",\"span\",\"span-80\",{\"className\":\"hljs-type\",\"children\":\"Vec\"}],\"\u003cEpicycle\u003e = selected_coeffs\\n        .\",[\"$\",\"span\",\"span-81\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"iter\"}],\"()\\n        .\",[\"$\",\"span\",\"span-82\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"map\"}],\"(|\u0026(freq, radius, phase)| Epicycle {\\n            radius,\\n            freq,\\n            phase,\\n        })\\n        .\",[\"$\",\"span\",\"span-83\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"collect\"}],\"();\\n\\n    (c_0, epicycles)\\n}\\n\\n\",[\"$\",\"span\",\"span-84\",{\"className\":\"hljs-keyword\",\"children\":\"pub\"}],\" \",[\"$\",\"span\",\"span-85\",{\"className\":\"hljs-keyword\",\"children\":\"fn\"}],\" \",[\"$\",\"span\",\"span-86\",{\"className\":\"hljs-title function_\",\"children\":\"compute_position\"}],\"(c_0: Complex\u003c\",[\"$\",\"span\",\"span-87\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\"\u003e, epicycles: \u0026[Epicycle], t: \",[\"$\",\"span\",\"span-88\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\") \",[\"$\",\"span\",\"span-89\",{\"className\":\"hljs-punctuation\",\"children\":\"-\u003e\"}],\" (\",[\"$\",\"span\",\"span-90\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\", \",[\"$\",\"span\",\"span-91\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\") {\\n    \",[\"$\",\"span\",\"span-92\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-93\",{\"className\":\"hljs-keyword\",\"children\":\"mut \"}],[\"$\",\"span\",\"span-94\",{\"className\":\"hljs-variable\",\"children\":\"x\"}],\" = c_0.re;\\n    \",[\"$\",\"span\",\"span-95\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-96\",{\"className\":\"hljs-keyword\",\"children\":\"mut \"}],[\"$\",\"span\",\"span-97\",{\"className\":\"hljs-variable\",\"children\":\"y\"}],\" = c_0.im;\\n    \",[\"$\",\"span\",\"span-98\",{\"className\":\"hljs-keyword\",\"children\":\"for\"}],\" \",[\"$\",\"span\",\"span-99\",{\"className\":\"hljs-variable\",\"children\":\"epicycle\"}],\" \",[\"$\",\"span\",\"span-100\",{\"className\":\"hljs-keyword\",\"children\":\"in\"}],\" epicycles {\\n        \",[\"$\",\"span\",\"span-101\",{\"className\":\"hljs-keyword\",\"children\":\"let\"}],\" \",[\"$\",\"span\",\"span-102\",{\"className\":\"hljs-variable\",\"children\":\"angle\"}],\" = \",[\"$\",\"span\",\"span-103\",{\"className\":\"hljs-number\",\"children\":\"2.0\"}],\" * PI * epicycle.freq \",[\"$\",\"span\",\"span-104\",{\"className\":\"hljs-keyword\",\"children\":\"as\"}],\" \",[\"$\",\"span\",\"span-105\",{\"className\":\"hljs-type\",\"children\":\"f32\"}],\" * t + epicycle.phase;\\n        x += epicycle.radius * angle.\",[\"$\",\"span\",\"span-106\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"cos\"}],\"();\\n        y += epicycle.radius * angle.\",[\"$\",\"span\",\"span-107\",{\"className\":\"hljs-title function_ invoke__\",\"children\":\"sin\"}],\"();\\n    }\\n    (x, y)\\n}\\n\"]}]}]]}]}]]}]]}],\"$undefined\",[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/heneos-blog/_next/static/css/5eacd01f773eed7f.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"$L5\",null,{\"children\":[\"$L6\",\"$L7\",null]}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"fqzuMkEHG6zXyspcWY9GX\",{\"children\":[[\"$\",\"$L8\",null,{\"children\":\"$L9\"}],null]}],[\"$\",\"$La\",null,{\"children\":\"$Lb\"}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$c\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"9:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n6:null\n"])</script><script>self.__next_f.push([1,"7:null\nb:[[\"$\",\"title\",\"0\",{\"children\":\"TSP Art + FFT | HeNeos blog\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Research and implementation of TSP art along with Fourier epicycles\"}]]\n"])</script></body></html>